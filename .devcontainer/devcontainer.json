{
  "name": "ESP-IDF v5.5 (Robust Build v2)",

  // Dùng image chính thức của Espressif có sẵn IDF v5.5
  "image": "espressif/idf:v5.5",

  // Tự động cài các extension cần thiết
  "customizations": {
    "vscode": {
      "extensions": [
        "espressif.esp-idf",
        "ms-vscode.cpptools",
        "ms-vscode.cpptools-extension-pack",
        "ms-vscode.cmake-tools",
        "ms-python.python"
      ]
    }
  },

  // Tự động thêm lệnh kích hoạt IDF vào terminal
  // (Lệnh này sẽ chạy với user mặc định của Codespaces)
  "postCreateCommand": "echo 'source /opt/esp/idf/export.sh' >> ~/.bashrc && echo 'Codespace is ready! ESP-IDF is pre-installed.' && sleep infinity"

  // KHÔNG còn dòng "remoteUser": "idf" nữa!
}
